{"id":"ava-testing-setup","createTime":"2018-01-31T01:46:36.418Z","html":"<h1>JavaScript Testing - AVA setup</h1>\n<p><a href=\"https://github.com/avajs/ava\">官方github</a></p>\n<h2>1. add AVA to your project</h2>\n<pre><code class=\"language-bash\"> $ npm install --global ava\n \n $ ava --init \n</code></pre>\n<p>运行上述命令后会在package.json里生成ava的依赖以及test的script</p>\n<pre><code class=\"language-json\">{\n    // ...\n\t\"scripts\": {\n\t\t\"test\": \"ava\"\n\t},\n\t\"devDependencies\": {\n\t\t\"ava\": \"^0.20.0\"\n\t}\n\t// ...\n}\n\n</code></pre>\n<p>当然你也可以手动安装ava，然后配置package.json</p>\n<h2>2.创建测试文件</h2>\n<p>默认在project root 文件下载创建test.js</p>\n<pre><code class=\"language-ecmascript\">import test from 'ava'\n\ntest('first test',t=&gt;{\n    t.pass();\n})\n\n</code></pre>\n<p>当然你可以通过配置指定test的文件夹,在package.json里加入ava配置</p>\n<pre><code class=\"language-json\">{\n //...\n  \"ava\": {\n    \"files\": [\n      \"./test/unittest/specs/**/*.js\",\n      \"!./test/unittest/specs/ignored.js\"\n    ]\n  }\n// ...\n}\n</code></pre>\n<p>通过！匹配需要忽略的文件</p>\n<h2>3.run test</h2>\n<pre><code class=\"language-bash\">$ npm <span class=\"hljs-built_in\">test</span>\n</code></pre>\n<p>that's all!</p>\n<h2>4. 一些tips</h2>\n<p>在官方的配置中，有一个require的配置。是在跑测试之前加载必要项。</p>\n<p>比如你的application使用vue,es6,element-ui或者一些其他的框架或组件，就可以通过require引入这些配置。</p>\n<pre><code class=\"language-json\">{\n //...\n  \"ava\": {\n    \"files\": [\n      \"./test/unittest/specs/**/*.js\",\n      \"!./test/unittest/specs/ignored.js\"\n    ],\n    \"require\": [\n      \"./test/unittest/helpers/setup.js\"\n    ]\n  },\n// ...\n}\n</code></pre>\n<p>setup.js</p>\n<pre><code class=\"language-ecmascript\">// Setup browser environment\nrequire('browser-env')();\n\nconst hooks = require('require-extension-hooks'),\n    Vue = require('vue'),\n    ElementUI = require('element-ui');\n\nVue.use(ElementUI);\n\n// Setup vue files to be processed by `require-extension-hooks-vue`\nhooks('vue').plugin('vue').push();\n// Setup vue and js files to be processed by `require-extension-hooks-babel`\nhooks(['vue', 'js']).plugin('babel').push();\n</code></pre>\n<p>最后附上我学习AVA时的练手<a href=\"https://github.com/shenjo/Javascript_test_study/tree/master/AVA\">repo</a></p>\n"}